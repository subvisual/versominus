<!DOCTYPE html>
<html>
  <head>
    <script type="text/javascript" src="https://www.airconsole.com/api/airconsole-1.4.0.js"></script>
  </head>
  <body>
    <h1>Hello Controller</h1>
    <script type="text/javascript">
    var air_console = new AirConsole();

    var handshake = function() {
      console.log('handshake');
      air_console.message(AirConsole.SCREEN, {
        handshake: true
      });
    };

    air_console.onReady = function() {
      console.log('ready');
      handshake();
      air_console.message(AirConsole.SCREEN, "How are you?");
    };

    air_console.onMessage(function(device_id, data) {
      if (data.handshake) {
        handshake();
      }
    });

    console.log('here');
    // Send a message to the screen
    air_console.message(AirConsole.SCREEN, "How are you?");

    // Listen for messages
    air_console.onMessage = function(from, data) {
      air_console.message(from, "Full of pixels!");

      // Show message on device screen
      var info = document.createElement('DIV');
      info.innerHTML = data;
      document.body.appendChild(info);
    };
    </script>
</body>
</html>
